<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的个人主页</title>
    <!-- Tailwind CSS (用于样式) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Marked.js (用于Markdown编译) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Font Awesome (用于图标) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* 自定义字体与平滑滚动 */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f9fafb; /* 极淡的灰白背景 */
            color: #1f2937;
        }

        /* Markdown 内容样式覆盖 */
        .markdown-body h1 { font-size: 2em; font-weight: 700; margin-bottom: 0.5em; margin-top: 1em; }
        .markdown-body h2 { font-size: 1.5em; font-weight: 600; margin-bottom: 0.5em; margin-top: 1em; }
        .markdown-body p { margin-bottom: 1em; line-height: 1.7; color: #374151; }
        .markdown-body ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; }
        .markdown-body pre { background: #1f2937; color: #e5e7eb; padding: 1em; border-radius: 0.5rem; overflow-x: auto; margin-bottom: 1em; }
        .markdown-body code { background: #e5e7eb; color: #c02a35; padding: 0.2em 0.4em; border-radius: 0.25rem; font-size: 0.9em; }
        .markdown-body pre code { background: transparent; color: inherit; padding: 0; }
        .markdown-body blockquote { border-left: 4px solid #e5e7eb; padding-left: 1em; color: #6b7280; font-style: italic; }
        .markdown-body img { border-radius: 0.5rem; max-width: 100%; margin: 1em 0; }
        .markdown-body a { color: #2563eb; text-decoration: underline; }

        /* 动画效果 */
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- 主容器 -->
    <div id="app" class="flex-grow w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        
        <!-- 页面 1: 个人主页概览 -->
        <div id="home-view" class="fade-in space-y-12">
            
            <!-- 个人简介模块 -->
            <header class="flex flex-col md:flex-row items-center md:items-start text-center md:text-left gap-8 border-b border-gray-200 pb-10">
                <div class="relative group">
                    <img id="avatar-img" src="" alt="Avatar" class="w-32 h-32 md:w-40 md:h-40 rounded-full object-cover shadow-lg border-4 border-white">
                    <div class="absolute inset-0 rounded-full border border-black/5"></div>
                </div>
                <div class="flex-1 space-y-4">
                    <h1 id="profile-name" class="text-3xl md:text-4xl font-bold tracking-tight text-gray-900"></h1>
                    <p id="profile-bio" class="text-lg text-gray-600 max-w-2xl leading-relaxed"></p>
                    
                    <!-- 社交链接 -->
                    <div id="social-links" class="flex justify-center md:justify-start gap-4 pt-2">
                        <!-- JS 动态注入 -->
                    </div>
                </div>
            </header>

            <!-- 项目/文章列表模块 -->
            <section>
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">精选项目 & 文章</h2>
                    <span class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full">Works</span>
                </div>
                
                <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- 项目卡片由 JS 生成 -->
                </div>
            </section>

            <footer class="text-center text-gray-400 text-sm py-8 border-t border-gray-100 mt-12">
                <p>&copy; <span id="year"></span> Designed by You.</p>
            </footer>
        </div>

        <!-- 页面 2: 文章详情页 (默认隐藏) -->
        <div id="detail-view" class="hidden fade-in pb-20">
            <!-- 顶部导航 -->
            <div class="sticky top-0 bg-[#f9fafb]/95 backdrop-blur-sm z-10 py-4 mb-8 border-b border-gray-200 flex items-center justify-between">
                <button onclick="goHome()" class="group flex items-center gap-2 text-gray-600 hover:text-black transition-colors">
                    <div class="w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center justify-center group-hover:border-gray-400">
                        <i class="fa-solid fa-arrow-left text-sm"></i>
                    </div>
                    <span class="font-medium">返回主页</span>
                </button>
                <div class="flex gap-2">
                    <button class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200" title="Share" onclick="copyLink()">
                        <i class="fa-solid fa-share-nodes text-gray-600 text-sm"></i>
                    </button>
                </div>
            </div>

            <!-- 文章内容 -->
            <article class="bg-white rounded-2xl shadow-sm p-6 md:p-10 mb-10 border border-gray-100">
                <div class="mb-8">
                    <span id="detail-category" class="text-xs font-bold tracking-wider text-blue-600 uppercase mb-2 block">Category</span>
                    <h1 id="detail-title" class="text-3xl md:text-4xl font-bold text-gray-900 mb-4"></h1>
                    <div class="flex items-center gap-4 text-sm text-gray-500">
                        <span id="detail-date"><i class="far fa-calendar-alt mr-1"></i> </span>
                        <span><i class="far fa-clock mr-1"></i> 阅读需 5 分钟</span>
                    </div>
                    <img id="detail-image" src="" class="w-full h-64 md:h-96 object-cover rounded-xl mt-6 shadow-md" alt="Cover">
                </div>
                
                <!-- Markdown 渲染区域 -->
                <div id="detail-content" class="markdown-body">
                    <!-- Markdown 编译后的 HTML 将在这里 -->
                </div>

                <!-- 外部链接按钮 -->
                <div class="mt-10 pt-6 border-t border-gray-100">
                    <a id="detail-link" href="#" target="_blank" class="inline-flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium">
                        访问项目/页面 <i class="fa-solid fa-external-link-alt text-xs"></i>
                    </a>
                </div>
            </article>

            <!-- 评论区 -->
            <section class="bg-white rounded-2xl shadow-sm p-6 md:p-10 border border-gray-100">
                <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-2">
                    <i class="fa-regular fa-comments"></i> 评论区
                </h3>
                
                <!-- 评论列表 -->
                <div id="comments-list" class="space-y-6 mb-8">
                    <!-- 评论由 JS 生成 -->
                    <div class="text-center text-gray-400 py-4">暂无评论，快来抢沙发吧！</div>
                </div>

                <!-- 发表评论表单 -->
                <div class="bg-gray-50 rounded-xl p-4 md:p-6">
                    <h4 class="text-sm font-bold text-gray-700 mb-3">发表评论</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-3">
                        <input id="comment-name" type="text" placeholder="昵称 *" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                        <input id="comment-email" type="email" placeholder="邮箱 (可选，仅用于生成头像)" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                    </div>
                    <textarea id="comment-body" rows="3" placeholder="写下你的想法..." class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none mb-3"></textarea>
                    <div class="flex justify-end">
                        <button onclick="submitComment()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium">
                            发送评论
                        </button>
                    </div>
                </div>
                <p class="text-xs text-gray-400 mt-4 text-center">注意：本演示使用浏览器本地存储，清除缓存后评论会消失。</p>
            </section>
        </div>

    </div>

    <!-- 逻辑脚本 -->
    <script>
        // ================= 配置区域 (在此处修改你的信息) =================

        const profileData = {
            name: "Alex Dev", // 你的名字
            bio: "全栈开发者 / 游戏爱好者 / 开源贡献者。<br>热爱创造简洁而有用的工具，探索 Web 技术的边界。", // 你的简介
            avatar: "https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80", // 头像URL
            socials: [
                { icon: "fa-brands fa-github", url: "https://github.com/yourusername" },
                { icon: "fa-brands fa-twitter", url: "#" },
                { icon: "fa-solid fa-envelope", url: "mailto:your@email.com" }
            ]
        };

        // 项目与文章数据 (Markdown 支持)
        const postsData = [
            {
                id: 1,
                title: "Unity 独立游戏开发日志",
                category: "Game Dev",
                date: "2023-10-15",
                desc: "探索像素风 Rogue-like 游戏的程序化地图生成算法与实现细节。",
                image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80",
                link: "https://github.com",
                // 在这里写 Markdown 内容
                content: `
### 地图生成的挑战
在制作这款 Rogue-like 游戏时，最大的挑战是如何保证随机生成的地图既具有**探索性**又**不会产生死路**。

我们采用了 **元胞自动机 (Cellular Automata)** 算法来进行洞穴生成。

#### 核心代码片段
\`\`\`csharp
void GenerateCaves() {
    // 初始化网格
    // 迭代平滑处理
    for (int i = 0; i < 5; i++) {
        SmoothMap();
    }
}
\`\`\`

#### 视觉风格
为了配合复古风格，我们使用了 16x16 的像素图块，并实现了动态光照系统。
                `
            },
            {
                id: 2,
                title: "React 极简待办事项 App",
                category: "Web App",
                date: "2023-09-20",
                desc: "一个专注于交互体验的 Todo 应用，支持拖拽排序与本地持久化存储。",
                image: "https://images.unsplash.com/photo-1484480974693-6ca0a78fb36b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80",
                link: "#",
                content: `
### 设计理念
市面上的 Todo 应用太复杂了。我想做一个只有**添加**、**完成**和**删除**的应用。

- **React 18**: 利用最新的并发特性。
- **Tailwind CSS**: 快速构建响应式界面。
- **Framer Motion**: 添加丝滑的动画效果。

> "简单是终极的复杂。" - 达·芬奇

你可以在这里试用 Demo 版本...
                `
            },
            {
                id: 3,
                title: "摄影集：城市的角落",
                category: "Photography",
                date: "2023-08-05",
                desc: "记录那些在快节奏生活中被忽略的静谧瞬间。",
                image: "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80",
                link: "#",
                content: `
### 凌晨四点的街道
这时候城市还没有醒来，只有路灯和偶尔驶过的出租车。

![Street](https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80)

拍摄参数：
* Camera: Sony A7III
* Lens: 35mm f/1.4
* ISO: 1600
                `
            }
        ];

        // ================= 核心逻辑 =================

        let currentPostId = null;

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            renderProfile();
            renderProjectsList();
            document.getElementById('year').textContent = new Date().getFullYear();
        });

        // 渲染个人信息
        function renderProfile() {
            document.getElementById('profile-name').textContent = profileData.name;
            document.getElementById('profile-bio').innerHTML = profileData.bio;
            document.getElementById('avatar-img').src = profileData.avatar;
            
            const socialContainer = document.getElementById('social-links');
            profileData.socials.forEach(social => {
                const a = document.createElement('a');
                a.href = social.url;
                a.className = "text-gray-400 hover:text-gray-900 transition-colors text-2xl";
                a.innerHTML = `<i class="${social.icon}"></i>`;
                socialContainer.appendChild(a);
            });
        }

        // 渲染项目列表卡片
        function renderProjectsList() {
            const grid = document.getElementById('projects-grid');
            grid.innerHTML = '';
            
            postsData.forEach(post => {
                const card = document.createElement('div');
                card.className = "bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden cursor-pointer card-hover flex flex-col h-full";
                card.onclick = () => openArticle(post.id);
                
                card.innerHTML = `
                    <div class="h-48 overflow-hidden relative">
                        <img src="${post.image}" alt="${post.title}" class="w-full h-full object-cover transition-transform duration-500 hover:scale-105">
                        <div class="absolute top-3 left-3 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold text-gray-800 shadow-sm">
                            ${post.category}
                        </div>
                    </div>
                    <div class="p-6 flex-1 flex flex-col">
                        <h3 class="text-xl font-bold text-gray-900 mb-2 line-clamp-1">${post.title}</h3>
                        <p class="text-gray-500 text-sm mb-4 flex-1 line-clamp-3">${post.desc}</p>
                        <div class="flex items-center justify-between mt-auto pt-4 border-t border-gray-50">
                            <span class="text-xs text-gray-400">${post.date}</span>
                            <span class="text-blue-600 text-sm font-medium flex items-center gap-1 group">
                                阅读更多 <i class="fa-solid fa-arrow-right text-xs transition-transform group-hover:translate-x-1"></i>
                            </span>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // 打开文章详情
        function openArticle(id) {
            const post = postsData.find(p => p.id === id);
            if (!post) return;

            currentPostId = id;

            // 填充内容
            document.getElementById('detail-title').textContent = post.title;
            document.getElementById('detail-category').textContent = post.category;
            document.getElementById('detail-date').innerHTML = `<i class="far fa-calendar-alt mr-1"></i> ${post.date}`;
            document.getElementById('detail-image').src = post.image;
            document.getElementById('detail-link').href = post.link;
            
            // Markdown 编译
            document.getElementById('detail-content').innerHTML = marked.parse(post.content);

            // 切换视图
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('detail-view').classList.remove('hidden');
            
            // 滚动到顶部
            window.scrollTo(0, 0);

            // 加载评论
            loadComments(id);
        }

        // 返回主页
        function goHome() {
            document.getElementById('detail-view').classList.add('hidden');
            document.getElementById('home-view').classList.remove('hidden');
            window.scrollTo(0, 0);
            currentPostId = null;
        }

        function copyLink() {
            // 简单模拟复制功能
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('链接已复制到剪贴板');
            });
        }

        // ================= 评论系统 (LocalStorage 实现) =================
        // 注意：这是前端模拟。如果需要真正的后端，建议接入 Giscus。

        function getStorageKey(postId) {
            return `comments_post_${postId}`;
        }

        function loadComments(postId) {
            const list = document.getElementById('comments-list');
            const comments = JSON.parse(localStorage.getItem(getStorageKey(postId)) || '[]');
            
            list.innerHTML = '';

            if (comments.length === 0) {
                list.innerHTML = `<div class="text-center text-gray-400 py-4 bg-gray-50 rounded-lg">还没有评论，来做第一个发言的人吧！</div>`;
                return;
            }

            comments.forEach(c => {
                // 生成随机头像背景色
                const colors = ['bg-red-100 text-red-600', 'bg-blue-100 text-blue-600', 'bg-green-100 text-green-600', 'bg-yellow-100 text-yellow-600'];
                const colorClass = colors[Math.floor(Math.random() * colors.length)];
                
                const div = document.createElement('div');
                div.className = "flex gap-4 fade-in";
                div.innerHTML = `
                    <div class="flex-shrink-0 w-10 h-10 rounded-full ${colorClass} flex items-center justify-center font-bold text-sm">
                        ${c.name.charAt(0).toUpperCase()}
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center justify-between mb-1">
                            <h5 class="font-bold text-gray-900 text-sm">${c.name}</h5>
                            <span class="text-xs text-gray-400">${c.date}</span>
                        </div>
                        <p class="text-gray-600 text-sm leading-relaxed bg-gray-50 p-3 rounded-br-xl rounded-bl-xl rounded-tr-xl">${c.body}</p>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function submitComment() {
            const nameInput = document.getElementById('comment-name');
            const emailInput = document.getElementById('comment-email');
            const bodyInput = document.getElementById('comment-body');

            const name = nameInput.value.trim();
            const body = bodyInput.value.trim();

            if (!name || !body) {
                alert('请填写昵称和评论内容');
                return;
            }

            const newComment = {
                id: Date.now(),
                name: name,
                email: emailInput.value.trim(),
                body: body,
                date: new Date().toLocaleDateString() + ' ' + new Date().toLocaleTimeString()
            };

            const key = getStorageKey(currentPostId);
            const comments = JSON.parse(localStorage.getItem(key) || '[]');
            comments.unshift(newComment); // 新评论在最前
            localStorage.setItem(key, JSON.stringify(comments));

            // 清空表单并重新加载
            nameInput.value = '';
            emailInput.value = '';
            bodyInput.value = '';
            loadComments(currentPostId);
        }

    </script>
</body>
</html>